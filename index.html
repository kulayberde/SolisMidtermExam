<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
 
    <!-- Bootstrap CSS -->
    <link
href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
 
    <!-- SweetAlert -->
    <script
src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/2.1.2/sweetalert.min.js"
      integrity="sha512-AA1Bzp5Q0K1KanKKmvN/4d3IRKVlv9PYgwFPvm32nPO6QS8yH1HO7LbgB1pgiOxPtfeg5zEn2ba64MUcqJx6CA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
 
    <title>Authentication is Fun</title>
    <style>
      body {
        text-align: center;
        background-color: lightseagreen;
        color: black;
      }
    </style>
  </head>
  <body class="container py-5">
 
    <div id="authForm" class="mb-5">
      <h2 class="mb-3">Sign Up or Sign In</h2>
      <div class="mb-3">
        <input type="email" class="form-control w-50 mx-auto" placeholder="Email" id="userEmail" />
      </div>
      <div class="mb-3">
        <input type="password" class="form-control w-50 mx-auto" placeholder="Password" id="userPassword" />
      </div>
      <div>
        <button class="btn btn-primary me-2" id="signUpButton">Sign Up</button>
        <button class="btn btn-success" id="signInButton">Sign In</button>
      </div>
    </div>
 
    <div id="secretContent" style="display: none;">
        <body>
            <div class="container">
              <h2>CRUD with Firebase</h2>
              <hr />
              <br />
              <div class="form">
                RollNo: <input type="text" name="RollNo" id="roll" /> <br /><br />
                Name:&nbsp; <input type="text" name="name" id="name" /> <br /><br />
                Gender: <input type="text" name="gender" id="gender" /> <br /><br />
                Address: <input type="text" name="Address" id="address" /> <br /><br />
                Email: <input type="text" name="Email" id="email" /> <br /><br />
                Race: <input type="text" name="Race" id="race" /> <br /><br />
                Language: <input type="text" name="language" id="language" /> <br /><br />
                Number: <input type="text" name="number" id="number" /> <br /><br />
              </div>
        
              <div class="buttons">
                <button id="insert">Insert</button>
                <button id="read">Read</button>
                <button id="update">Update</button>
                <button id="delete">Delete</button>
              </div>
            </div>
        
            <script src="https://www.gstatic.com/firebasejs/8.4.2/firebase.js"></script>
        
            <script src="./fireConfig.js"></script>
        
            <script src="./myscript.js"></script>
          </body>
 
      <button class="btn btn-danger mt-3" id="signOutButton">Sign Out</button>
    </div>
 
    <!-- Firebase Auth Script -->
    <script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.17.1/firebase-app.js";
      import {
        getAuth,
        createUserWithEmailAndPassword,
        signInWithEmailAndPassword,
        onAuthStateChanged,
        signOut
} from "https://www.gstatic.com/firebasejs/9.17.1/firebase-auth.js";
 
      const firebaseConfig = {
        apiKey: "AIzaSyA-RdAbepaa00EibKWW_CS43uEAwubNn58",
authDomain: "logindb-dcea6.firebaseapp.com",
databaseURL: "https://logindb-dcea6-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "logindb-dcea6",
storageBucket: "logindb-dcea6.appspot.com",
        messagingSenderId: "616797320496",
        appId: "1:616797320496:web:06a3ccc1e931750faf44f5"
      };
 
      const app = initializeApp(firebaseConfig);
      const auth = getAuth(app);
 
      const userEmail = document.querySelector("#userEmail");
      const userPassword = document.querySelector("#userPassword");
      const authForm = document.querySelector("#authForm");
      const secretContent = document.querySelector("#secretContent");
      const signUpButton = document.querySelector("#signUpButton");
      const signInButton = document.querySelector("#signInButton");
      const signOutButton = document.querySelector("#signOutButton");
 
      const userSignUp = async () => {
        const email = userEmail.value;
        const password = userPassword.value;
        try {
          const userCredential = await createUserWithEmailAndPassword(auth, email, password);
          Swal("Success", "Your account has been created!", "success");
        } catch (error) {
          Swal("Error", error.message, "error");
        }
      };
 
      const userSignIn = async () => {
        const email = userEmail.value;
        const password = userPassword.value;
        try {
          const userCredential = await signInWithEmailAndPassword(auth, email, password);
          Swal("Success", "You have signed in successfully!", "success");
        } catch (error) {
          Swal("Error", error.message, "error");
        }
      };
 
      const checkAuthState = () => {
        onAuthStateChanged(auth, (user) => {
          if (user) {
authForm.style.display = "none";
secretContent.style.display = "block";
          } else {
authForm.style.display = "block";
secretContent.style.display = "none";
          }
        });
      };
 
      const userSignOut = async () => {
        await signOut(auth);
      };
 
      checkAuthState();
 
      signUpButton.addEventListener("click", userSignUp);
      signInButton.addEventListener("click", userSignIn);
      signOutButton.addEventListener("click", userSignOut);
    </script>
 
    <!-- Bootstrap JS Bundle -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>